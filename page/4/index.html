<!doctype html>



  


<html class="theme-next geek5 use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Geek5, blog, 极客舞, 互联网技术, 研究技术" />





  <link rel="alternate" href="/atom.xml" title="Geek5-极客舞台" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="一位痴迷于研究互联网技术的极客，这个舞台是对各种新潮技术研究的记录。">
<meta property="og:type" content="website">
<meta property="og:title" content="Geek5-极客舞台">
<meta property="og:url" content="http://geek5.cn/page/4/index.html">
<meta property="og:site_name" content="Geek5-极客舞台">
<meta property="og:description" content="一位痴迷于研究互联网技术的极客，这个舞台是对各种新潮技术研究的记录。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Geek5-极客舞台">
<meta name="twitter:description" content="一位痴迷于研究互联网技术的极客，这个舞台是对各种新潮技术研究的记录。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Geek5',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 11412042,
      author: '凯哥'
    }
  };
</script>




  <link rel="canonical" href="http://geek5.cn/page/4/"/>

  <title> Geek5-极客舞台 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  
    <div class="site-meta-headline">
      <a>
        <img class="custom-logo-image" src="http://www.geek5.cn/wp-content/uploads/2016/08/geek5.png"
             alt="Geek5-极客舞台"/>
      </a>
    </div>
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Geek5-极客舞台</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">喜欢研究技术</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'vnhzDFgDpqQtaNEWCUhf','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/07/spring-mybatis-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" itemprop="url">
                  Spring mybatis 配置说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-07T16:35:14+08:00" content="2015-10-07">
              2015-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/07/spring-mybatis-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/07/spring-mybatis-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/07/spring-mybatis-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" class="leancloud_visitors" data-flag-title="Spring mybatis 配置说明">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre>&lt;!-- 配置c3p0数据源 --&gt;
   &lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;
      &lt;property name="driverClass" value="${jdbc.driver}" /&gt;
      &lt;property name="jdbcUrl" value="${jdbc.url}" /&gt;
      &lt;property name="user" value="${jdbc.username}" /&gt;
      &lt;property name="password" value="${jdbc.password}" /&gt;
&lt;!--      &lt;property name="setAutoCommitOnClose" value="false"/&gt; --&gt;
      &lt;!--连接池中保留的最小连接数。 --&gt;
      &lt;property name="minPoolSize" value="${jdbc.pool.minPoolSize}"/&gt;
      &lt;!--连接池中保留的最大连接数。Default: 15 --&gt;
      &lt;property name="maxPoolSize" value="${jdbc.pool.maxPoolSize}"/&gt;
      &lt;!--初始化时获取的连接数，取值应在minPoolSize与maxPoolSize之间。Default: 3 --&gt;
      &lt;property name="initialPoolSize" value="${jdbc.pool.initialPoolSize}"/&gt;
      &lt;!--最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 --&gt;
      &lt;property name="maxIdleTime" value="${jdbc.pool.maxIdleTime}"/&gt;
      &lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 --&gt;
      &lt;property name="acquireIncrement" value="30"/&gt;
      &lt;!--JDBC的标准参数，用以控制数据源内加载的PreparedStatements数量。但由于预缓存的statements 属于单个connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素。
         如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default: 0 --&gt;
      &lt;property name="maxStatements" value="0"/&gt;
      &lt;!--每60秒检查所有连接池中的空闲连接。Default: 0 --&gt;
      &lt;property name="idleConnectionTestPeriod" value="60"/&gt;
      &lt;!--定义在从数据库获取新连接失败后重复尝试的次数。Default: 30 --&gt;
      &lt;property name="acquireRetryAttempts" value="30"/&gt;
      &lt;!--获取连接失败将会引起所有等待连接池来获取连接的线程抛出异常。但是数据源仍有效 保留，并在下次调用getConnection()的时候继续尝试获取连接。如果设为true，那么在尝试 
         获取连接失败后该数据源将申明已断开并永久关闭。Default: false --&gt;
      &lt;property name="breakAfterAcquireFailure" value="true"/&gt;
      &lt;!--因性能消耗大请只在需要的时候使用它。如果设为true那么在每个connection提交的 时候都将校验其有效性。建议使用idleConnectionTestPeriod或automaticTestTable 
         等方法来提升连接测试的性能。Default: false --&gt;
      &lt;property name="testConnectionOnCheckout" value="true"/&gt;
   &lt;/bean&gt;

&lt;!-- 创建SqlSessionFactory，同时指定数据源 --&gt;
&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
   &lt;property name="dataSource" ref="dataSource" /&gt;
&lt;/bean&gt;

&lt;!--创建数据映射器，数据映射器必须为接口 --&gt;
&lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
   &lt;property name="annotationClass" value="org.springframework.stereotype.Repository" /&gt;
   &lt;property name="basePackage" value="com.shishuo.cms.dao" /&gt;
&lt;/bean&gt;</pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/07/spring-freemarker-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" itemprop="url">
                  Spring freemarker 配置说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-07T16:30:17+08:00" content="2015-10-07">
              2015-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/07/spring-freemarker-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/07/spring-freemarker-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/07/spring-freemarker-e9-85-8d-e7-bd-ae-e8-af-b4-e6-98-8e/" class="leancloud_visitors" data-flag-title="Spring freemarker 配置说明">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre>&lt;!-- 设置freeMarker配置文件路径 --&gt;
&lt;bean id="freemarkerConfiguration" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt;
    &lt;property name="location" value="classpath:freemarker.properties" /&gt;
&lt;/bean&gt;

&lt;!-- 配置freeMarker模板路径 --&gt;
&lt;bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"&gt;
    &lt;property name="freemarkerSettings" ref="freemarkerConfiguration" /&gt;
    &lt;property name="templateLoaderPath" value="/" /&gt;
    &lt;property name="defaultEncoding" value="UTF-8" /&gt;
    &lt;!-- 全局变量部分 --&gt;
    &lt;property name="freemarkerVariables"&gt;
        &lt;map&gt;
            &lt;entry key="systemManager"&gt;
                &lt;bean class="com.xxx.xxx" /&gt;
            &lt;/entry&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;!--配置jsp视图解析器 --&gt;
&lt;bean id="viewResolverCommon" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
    &lt;property name="prefix" value="/"/&gt;
    &lt;property name="suffix" value=".jsp"/&gt;&lt;!--可为空,方便实现自已的依据扩展名来选择视图解释类的逻辑  --&gt;
    &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt;
    &lt;property name="order" value="1"/&gt;
&lt;/bean&gt;
&lt;!-- 配置freeMarker视图解析器 --&gt;
&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver"&gt;
    &lt;property name="viewClass" value="org.springframework.web.servlet.view.freemarker.FreemarkerView"/&gt;
    &lt;property name="prefix" value="/"/&gt;
    &lt;property name="contentType" value="text/html; charset=utf-8" /&gt;
    &lt;property name="requestContextAttribute" value="request" /&gt;
    &lt;property name="suffix" value=".ftl" /&gt;
    &lt;property name="order" value="0"/&gt;
&lt;/bean&gt;</pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/07/spring-aop-expression-e7-ae-80-e5-8d-95-e8-af-b4-e6-98-8e/" itemprop="url">
                  spring aop expression简单说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-07T15:45:31+08:00" content="2015-10-07">
              2015-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/" itemprop="url" rel="index">
                    <span itemprop="name">B/S(ERP OA)</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/JAVA/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/07/spring-aop-expression-e7-ae-80-e5-8d-95-e8-af-b4-e6-98-8e/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/07/spring-aop-expression-e7-ae-80-e5-8d-95-e8-af-b4-e6-98-8e/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/07/spring-aop-expression-e7-ae-80-e5-8d-95-e8-af-b4-e6-98-8e/" class="leancloud_visitors" data-flag-title="spring aop expression简单说明">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>示例代码：</p>
<div><br><div><br><div><strong>[java]</strong> <a href="http://blog.csdn.net/steryzone/article/details/7240028#" title="view plain" target="_blank" rel="external">view plain</a><a href="http://blog.csdn.net/steryzone/article/details/7240028#" title="copy" target="_blank" rel="external">copy</a></div><br></div>

<ol>
<li>&lt;aop:config&gt;</li>
<li>&lt;aop:pointcut id=”userDAO”</li>
<li>expression=”execution(public <em> cn.dao.IUserDAO.</em>(..))” /&gt;</li>
<li>&lt;aop:advisor advice-ref=”tx” pointcut-ref=”userDAO”/&gt;</li>
<li>&lt;/aop:config&gt;<br></li></ol></div><br>在上面的代码中

<p>execution   是方法运行</p>
<p>public         是指定public的方法，也可以不写直接：execution(<em> cn.dao.IUserDAO.</em>(..)</p>
<ul>
<li>是任意返回值，可以有返回值，也可以是void没有返回值的方法</li>
</ul>
<p>cn.dao.IUserDAO.*                  是指定目录下的指定类任意方法</p>
<p>cn.dao.IUserDAO.insert*       是指定目录下的指定类insert开头的任意方法</p>
<p>cn.dao.IUserDAO.<em>.</em>              是指定目录下的任意类下的任意方法</p>
<p>cn.dao..<em>.</em>                                是指定目录下的任意目录下任意类下的任意方法</p>
<p>(..)                                              是任何参数，可以是没有参数</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>在execution中是可以有多个的方法，例如：</p>
<p>execution(<em> com.action.userinfoAction..</em>(..))&amp;&amp;execution(<em> com.action.memberAction..</em>(..))&amp;&amp;!execution(<em> get</em>(..))&amp;&amp;!execution(<em> set</em>(..))</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/07/e8-af-a6-e8-a7-a3spring-mvc-4-e4-b9-8bviewresolver-e8-a7-86-e5-9b-be-e8-a7-a3-e6-9e-90-e5-99-a8/" itemprop="url">
                  详解Spring MVC 4之ViewResolver视图解析器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-07T15:04:35+08:00" content="2015-10-07">
              2015-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/" itemprop="url" rel="index">
                    <span itemprop="name">B/S(ERP OA)</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/B-S-ERP-OA/JAVA/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/07/e8-af-a6-e8-a7-a3spring-mvc-4-e4-b9-8bviewresolver-e8-a7-86-e5-9b-be-e8-a7-a3-e6-9e-90-e5-99-a8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/07/e8-af-a6-e8-a7-a3spring-mvc-4-e4-b9-8bviewresolver-e8-a7-86-e5-9b-be-e8-a7-a3-e6-9e-90-e5-99-a8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/07/e8-af-a6-e8-a7-a3spring-mvc-4-e4-b9-8bviewresolver-e8-a7-86-e5-9b-be-e8-a7-a3-e6-9e-90-e5-99-a8/" class="leancloud_visitors" data-flag-title="详解Spring MVC 4之ViewResolver视图解析器">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-family: 微软雅黑;"><span>  所有的We MVC框架都有一套它自己的解析视图的机制，Spring MVC也不例外，它使用ViewResolver进行视图解析，让用户在浏览器中渲染模型。ViewResolver是一种开箱即用的技术，能够解析 JSP、Velocity模板和XSLT等多种视图。</span></span><br><span style="font-family: 微软雅黑;"><span>    Spring处理视图最重要的两个接口是ViewResolver和View。ViewResolver接口在视图名称和真正的视图之间提供映射； 而View接口则处理请求将真正的视图呈现给用户。</span></span></p>
<p><span style="font-family: 微软雅黑;"><span>   <strong> 1.几种常见的ViewResolver视图解析器</strong></span></span></p>
<p><span style="font-family: 微软雅黑;"><span>    在Spring MVC 4控制器中，所有的处理方法必须返回一个逻辑视图名称，无论是显式的（返回String，View或ModelAndView）还是隐式的。Spring中的视图由视图解析器处理这个逻辑视图名称，Spring有以下几种视图解析器：</span></span></p>
<p><span style="font-family: 微软雅黑;"><span>  <span>AbstractCachingViewResolver</span>：用来缓存视图的抽象视图解析器。通常情况下，视图在使用前就准备好了。继承改解析器就能够使用视图缓存。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br><span>XmlViewResolver</span> ：XML视图解析器。它实现了ViewResolver接口，接受相同DTD定义的XML配置文件作为Spring的XML bean工厂。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br><span>ResourceBundleViewResolver</span>：它使用了ResourceBundle定义下的bean，实现了ViewResolver接口，指定了绑定包的名称。通常情况下，配置文件会定义在classpath下的properties文件中，默认的文件名字是views.properties。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br><span>UrlBasedViewResolver</span>：它简单实现了ViewResolver接口，它不用显式定义，直接影响逻辑视图到URL的映射。它让你不用任何映射就能通过逻辑视图名称访问资源。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br><span>InternalResourceViewResolver</span>：国际化视图解析器。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br>VelocityViewResolver<span style="font-family: Helvetica,Arial,Freesans,Clean,sans-serif;"> /</span>FreeMarkerViewResolver：Velocity或FreeMarker视图解析器。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br><span>ContentNegotiatingViewResolver</span>：内容谈判视图解析器</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    在JSP视图技术中，Spring MVC经常会使用 UrlBasedViewResolver视图解析器，该解析器会将视图名称翻译成URL并通过RequestDispatcher处理请求后渲染视图。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>&lt;bean id=”viewResolver”        class=”org.springframework.web.servlet.view.UrlBasedViewResolver”&gt;    &lt;property name=”viewClass” value=”org.springframework.web.servlet.view.JstlView”/&gt;    &lt;property name=”prefix” value=”/WEB-INF/views/“/&gt;    &lt;property name=”suffix” value=”.jsp”/&gt;&lt;/bean&gt;</span></span><br><span style="font-family: 微软雅黑;"><span>    假如我们配置了如上所示的URL视图解析器，我们返回了一个叫“favmvc”的视图名称，视图解析器就会将请求转发到RequestDispatcher，然后跳转到/WEB-INF/views/favmvc.jsp页面。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    假如我们想要在应用中使用不同的视图技术，我们就应该使用 ResourceBundleViewResolver。</span></span><br><span style="font-family: 微软雅黑;"><span>&lt;bean id=”viewResolver”        class=”org.springframework.web.servlet.view.ResourceBundleViewResolver”&gt;    &lt;property name=”basename” value=”views”/&gt;    &lt;property name=”defaultParentView” value=”parentView”/&gt;&lt;/bean&gt;</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    ResourceBundleViewResolver对于每个要处理的视图，都会检查 ResourceBundle中basename的唯一性，它使用 [viewname].(class)作为视图类，[viewname].url作为视图的url。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>   <strong> 2. 链式视图解析器（Chaining ViewResolvers）</strong></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    Spring支持同时配置多个视图解析器，也就是链式视图解析器。这样，在某些情况下，就能够重写某些视图。如果我们配置了多个视图解析器，并想要给视图 解析器排序的话，设定 order 属性就可以指定解析器执行的顺序。order的值越高，解析器执行的顺序越晚。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    下面代码所示的例子由两个视图解析器组成。 InternalResourceViewResolver总是最后一个执行，而 XmlViewResolver则指定解析XML视图（InternalResourceViewResolver不支持Excel视图）。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>&lt;bean id=”jspViewResolver” class=”org.springframework.web.servlet.view.InternalResourceViewResolver”&gt;    &lt;property name=”viewClass” value=”org.springframework.web.servlet.view.JstlView”/&gt;    &lt;property name=”prefix” value=”/WEB-INF/jsp/“/&gt;    &lt;property name=”suffix” value=”.jsp”/&gt;&lt;/bean&gt;&lt;bean id=”excelViewResolver” class=”org.springframework.web.servlet.view.XmlViewResolver”&gt;    &lt;property name=”order” value=”1”/&gt;    &lt;property name=”location” value=”/WEB-INF/views.xml”/&gt;&lt;/bean&gt;<em>&lt;!– in views.xml –&gt;</em>&lt;beans&gt;    &lt;bean name=”report”/&gt;&lt;/beans&gt;</span></span></p>
<p><span style="font-family: 微软雅黑;"><span>    如果视图解析器没有指定视图的话，Spring就会检查其它的视图解析器，直到有一个完整的包含视图的视图解析器。如果一个完整的视图解析器也没有找到的话，Spring就会抛出 ServletException。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    视图解析器规定如果没有找到视图就返回null。但不是所有的视图解析器都这么做，因为在某些情况下，解析器并不能检测是否存在视图。比如 InternalResourceViewResolver在内部使用RequestDispatcher时，调度转发是判断JSP是否存在的唯一方法， 但该action却只能执行一次。VelocityViewResolver和其它的一些解析器也这样，区分这些视图解析器能否在找不到视图的情况下返回 null，最好的方法就是看官方文档中它是否支持了。由于 InternalResourceViewResolver总会返回视图，在视图链中使用InternalResourceViewResolver就能 让你避免这些问题。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span><strong>    3.  重定向视图</strong></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    在controller控制器中强制重定向的方法就是创建并返回Spring的RedirectView实例。在这种情况 下，DispatcherServlet不再使用正常的视图机制，因为它已经返回了重定向视图，DispatcherServlet只是告诉视图去显示。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    RedirectView会调用 HttpServletResponse.sendRedirect()方法，然后它就作为HTTP重定向返回给客户端浏览器。默认情况下，所有的模板属性变量都认为是重定向URL，其余的属性自动附加为查询参数。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    <strong>redirect前缀</strong></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    尽管RedirectView工作机制很好，但如果控制器本身创建RedirectView时，毫无疑问控制器本身知道该如何重定向。这样做并不好，控制器不应该关心响应如何处理，它只是处理被注入的视图名称。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    当我们在返回视图名称时，如果使用了“redirect：”前缀（如“redirect : /login”），UrlBasedViewResolver视图控制器会识别这是一次特殊的重定向，并把redirect后面的视图名称当做重定向的地址。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    假如我们在<a href="http://favccxx.com" target="_blank" rel="external">http://favccxx.com</a>应用中返回“redirect:/favboy”视图时， 系统会重定向到<a href="http://favccxx.com/favboy" target="_blank" rel="external">http://favccxx.com/favboy</a>。但如果我们返回了“redirect:<a href="http://favsoft.me" target="_blank" rel="external">http://favsoft.me</a>”这样的视图时，系统会重定向到<a href="http://favsoft.me的视图上。" target="_blank" rel="external">http://favsoft.me的视图上。</a></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    <strong>forward前缀</strong></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    forward前缀视图是另一种通过URLBasedViewResolver机制处理到的转向机制，它在视图名称周围创建 InternalResourceView，因此这个前缀跟InternalResourceViewResolver和 InternalResourceView无关。但这个前缀在你想使用其它视图技术但想强制通过Servlet/JSP引擎处理资源进行转向时是有用的。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>   <strong> redirect与forward的区别    </strong></span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    <strong>redirect</strong>方 式相当 于”response.sendRedirect()”.这种方式外部特征就是浏览器地址栏最后显示的路径是转发后的新的路径.工作方式是这样的，服务器 端会首先发一个response给浏览器，然后浏览器收到这个response后再发一个requeset给服务器，然后服务器发新的response给 浏览器。这时页面收到的request是一个新从浏览器发来的.这种方式的结果是：</span></span><br><span style="font-family: 微软雅黑;"><span>    A.在转发前后有两个不同的request对象,转发前后的两个控制器在request上的参数(request.getParameter())和request属性(request.getAttribute())不能共享。</span></span><br><span style="font-family: 微软雅黑;"><span>    B.如果转发前后的两个控制器都配置在spring 拦截器范围内,这样拦截器会拦截前后两个request,即会拦截两次。</span></span><br><span style="font-family: 微软雅黑;"><span>    C.最后返回到浏览器后,因为地址栏显示的是转发后的url，所以刷新页面时只会执行后面的url映射的控制器。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>    <strong>forward</strong>方 式相当于 request.getRequestDispatcher().forward(request,response) .这种方式的外部特征是浏览器地址显示的路径是转发前的路径。工作方式是这样，forward 发生在服务器内部,在前一个控制器处理完毕后,直接进入下一个控制器处理，并将最后的response发给浏览器。这种方式的结果是：</span></span><br><span style="font-family: 微软雅黑;"><span>    A.转发前后是同一个request,后一个控制器可共享前一个控制器的参数与属性。</span></span><br><span style="font-family: 微软雅黑;"><span>    B.因为是同一个request，拦截器只会拦截前一个url，如果前一个url在映射时未配置到拦截器拦截，则拦截后一个url，即只拦截一次。</span></span><br><span style="font-family: 微软雅黑;"><span>    C.最后返回到浏览器后,因为地址栏显示的是转发前的url，所以刷新页面时会依次执行前后两个控制器。</span></span><br><span style="font-family: 微软雅黑;"><span><br></span></span><br><span style="font-family: 微软雅黑;"><span>   总结：本文介绍了Spring MVC 4中常见的几种视图解析器，以及如何配置视图解析器包括链式视图解析器，最后除了正常视图映射机制外，我们还能够通过redirect/forward视 图转向机制完成视图的重定向。本文偏向原理性介绍，关于视图解析机制在工作中的使用，并没有做过多的介绍，目的是让读者能够了解ViewResolver 的工作机制。</span></span></p>
<p>原文：<a href="http://bbs.51cto.com/thread-1133128-1.html" target="_blank" rel="external">http://bbs.51cto.com/thread-1133128-1.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/22/e5-ae-89-e8-a3-85tomcat-e6-8c-87-e5-ae-9ajdk/" itemprop="url">
                  安装Tomcat指定JDK
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-09-22T16:15:54+08:00" content="2015-09-22">
              2015-09-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LINUX/" itemprop="url" rel="index">
                    <span itemprop="name">LINUX</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LINUX/Tools/" itemprop="url" rel="index">
                    <span itemprop="name">Tools</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/22/e5-ae-89-e8-a3-85tomcat-e6-8c-87-e5-ae-9ajdk/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/22/e5-ae-89-e8-a3-85tomcat-e6-8c-87-e5-ae-9ajdk/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/22/e5-ae-89-e8-a3-85tomcat-e6-8c-87-e5-ae-9ajdk/" class="leancloud_visitors" data-flag-title="安装Tomcat指定JDK">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div>

<h1 id="安装Tomcat指定JDK"><a href="#安装Tomcat指定JDK" class="headerlink" title="安装Tomcat指定JDK"></a><a href="http://www.cnblogs.com/lioillioil/archive/2011/10/08/2202169.html" target="_blank" rel="external">安装Tomcat指定JDK</a></h1><p></p></div><br>一、应用实例<p></p>
<p>一般情况下一台服务器只跑一个业务，那么就直接配置一套环境，设置好Java环境变量即可。某些时候一台服务器上会安装多个业务，而且各个业务需要的JDK版本各不相同，或者为了使业务独立开来，需要指定Tomcat的JDK。</p>
<p>现假设某个业务的Tomcat(apache-tomcat-6.0.32)需要用到该版本JDK(jdk1.6.0_18)，JDK安装目录为 “/usr/local/java/jdk1.6.0_18”。</p>
<p>&nbsp;</p>
<p>二、安装Tomcat</p>
<p>1、通过Apache官网下载获得Tomcat(apache-tomcat-6.0.32.tar.gz)，将文件上传至指定目录，解压Tomcat安 装。我上传至Linux服务器的 “/home/appuser/yuexin/“ 目录下，取名为 “tomcat-yuexin” 。命令如下：</p>
<p><div></div></p>
<p><pre># tar zxvf apache-tomcat-6.0.32.tar.gz</pre></p>
<h1 id="mv-apache-tomcat-6-0-32-tomcat-yuexin"><a href="#mv-apache-tomcat-6-0-32-tomcat-yuexin" class="headerlink" title="mv apache-tomcat-6.0.32 tomcat-yuexin"></a>mv apache-tomcat-6.0.32 tomcat-yuexin</h1><p><br>&nbsp;</p>
<p>2、修改Tomcat三个配置文件，”tomcat/bin/catalina.sh” 、 “tomcat/bin/setclasspath.sh” 、 “tomcat/conf/server.xml” 。</p>
<p>1) 在catalina.sh文件和setclasspath.sh文件开头的空白处加上如下两句(指定JDK)：</p>
<p><div></div></p>
<p><pre>export JAVA_HOME=/usr/local/java/jdk1.6.0_18<br>export JRE_HOME=/usr/local/java/jdk1.6.0_18/jre</pre><br><br>2) 修改server.xml文件如下内容(解决多个Tomcat启动、停止端口冲突问题)：</p>
<p><div></div></p>
<p><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div></p>
<p><pre>&lt;Server port=”8005” shutdown=”SHUTDOWN”&gt;    —-&gt;    &lt;Server port=”8195” shutdown=”SHUTDOWN”&gt;</pre></p>
<p>&lt;Connector port=”8080” protocol=”HTTP/1.1” connectionTimeout=”20000” redirectPort=”8443” /&gt;    —-&gt;    &lt;Connector port=”8091” protocol=”HTTP/1.1”  maxThreads=”150” minSpareThreads=”25” maxSpareThreads=”75” enableLookups=”false” redirectPort=”8443” acceptCount=”100” debug=”0” connectionTimeout=”20000” disableUploadTimeout=”true” /&gt;</p>
<p>&lt;Connector port=”8009” protocol=”AJP/1.3” redirectPort=”8443” /&gt;    —-&gt;    &lt;Connector port=”8199” protocol=”AJP/1.3” redirectPort=”8443” /&gt;</p>
<p>&lt;Host name=”localhost”  appBase=”webapps” unpackWARs=”true” autoDeploy=”true” xmlValidation=”false” xmlNamespaceAware=”false”&gt;    —-&gt;    &lt;Host name=”10.10.3.54”  appBase=”webapps” unpackWARs=”true” autoDeploy=”true” xmlValidation=”false” xmlNamespaceAware=”false” &gt;&lt;Context path=”” docBase=”ROOT” reloadable=”true”&gt;&lt;/Context&gt;&lt;/Host&gt;</p>
<p><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><br>三、启动，停止Tomcat验证安装</p>
<p>1、启动Tomcat，并查看进程。如下：</p>
<p><div></div></p>
<p><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div></p>
<p><pre># cd bin/</pre></p>
<h1 id="startup-sh"><a href="#startup-sh" class="headerlink" title="./startup.sh"></a>./startup.sh</h1><h1 id="ps-ef-grep-tomcat"><a href="#ps-ef-grep-tomcat" class="headerlink" title="ps -ef|grep tomcat"></a>ps -ef|grep tomcat</h1><p>root     25178     1  0 09:46 ?        00:00:30 /usr/local/java/jdk1.6.0_18/jre/bin/java -Djava.util.logging.config.file=/home/appuser/yuexin/tomcat-yuexin/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/home/appuser/yuexin/tomcat-yuexin/endorsed -classpath /home/appuser/yuexin/tomcat-yuexin/bin/bootstrap.jar -Dcatalina.base=/home/appuser/yuexin/tomcat-yuexin -Dcatalina.home=/home/appuser/yuexin/tomcat-yuexin -Djava.io.tmpdir=/home/appuser/yuexin/tomcat-yuexin/temp org.apache.catalina.startup.Bootstrap start<br>root     26513 26303  0 14:48 pts/0    00:00:00 grep tomcat</p>
<h1 id="shutdown-sh"><a href="#shutdown-sh" class="headerlink" title="./shutdown.sh"></a>./shutdown.sh</h1><p><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><br>从进程信息可以看出Tomcat使用的JDK环境为 “/usr/local/java/jdk1.6.0_18” ，并且能正常启动和停止，启动后访问该服务器相应端口能看到Apach Tomcat的欢迎界面，停止时不影响其他应用进程。至此安装配置完成。</p>
<p>原文：<a href="http://www.cnblogs.com/lioillioil/archive/2011/10/08/2202169.html" target="_blank" rel="external">http://www.cnblogs.com/lioillioil/archive/2011/10/08/2202169.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/21/graphicsmagick-e5-ae-89-e8-a3-85-e5-8f-8a-e4-bd-bf-e7-94-a8/" itemprop="url">
                  GraphicsMagick安装及使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-09-21T15:02:00+08:00" content="2015-09-21">
              2015-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LINUX/" itemprop="url" rel="index">
                    <span itemprop="name">LINUX</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/21/graphicsmagick-e5-ae-89-e8-a3-85-e5-8f-8a-e4-bd-bf-e7-94-a8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/21/graphicsmagick-e5-ae-89-e8-a3-85-e5-8f-8a-e4-bd-bf-e7-94-a8/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/21/graphicsmagick-e5-ae-89-e8-a3-85-e5-8f-8a-e4-bd-bf-e7-94-a8/" class="leancloud_visitors" data-flag-title="GraphicsMagick安装及使用">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="cnblogs_post_body"><br><br>相信做过互联网图片的人都知道ImageMagick，超牛逼的图片处理库，而GraphicsMagick是从ImageMagick5.5.2的分支版本，支持多达88种图片格式的处理，而且相当稳定及高效，对于java应用来说GraphicsMagick+im4java简直就是天作之合。<br><br><strong>1) 安装GraphicsMagick</strong><br><div><br><pre># tar -zxvf GraphicsMagick-1.3.17.tar.gz<br># cd GraphicsMagick-1.3.17<br># ./configure –prefix=/usr/local/graphicsmagick-1.3.17</pre><br></div><br>输出以下内容，注意红色部分：<br><div><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><pre>Delegate Configuration:<br><br>BZLIB –with-bzlib=yes yes<br>DPS –with-dps=yes no<br>FlashPIX –with-fpx=no no<br>FreeType 2.0 –with-ttf=yes no (需要freetype支持)<br>Ghostscript None gs (unknown)<br>Ghostscript fonts –with-gs-font-dir=default /usr/share/fonts/default/Type1/<br>Ghostscript lib –with-gslib=no no<br>JBIG –with-jbig=yes no<br>JPEG v1 –with-jpeg=yes no (需要libjpeg支持)<br>JPEG-2000 –with-jp2=yes no<br>LCMS v1 –with-lcms=yes no<br>LCMS v2 –with-lcms2=yes no<br>LZMA –with-lzma=yes no<br>Magick++ –with-magick-plus-plus=yes yes<br>PERL –with-perl=no no<br>PNG –with-png=yes no (需要libpng支持)<br>TIFF –with-tiff=yes no<br>TRIO –with-trio=yes no<br>Windows fonts –with-windows-font-dir= none<br>WMF –with-wmf=yes no<br>X11 –with-x= no<br>XML –with-xml=yes yes<br>ZLIB –with-zlib=yes yes</pre><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br></div><br>如果./configure后出现以上信息，则需要安装第三方库以支持JPEG,PNG,FreeType处理，步骤如下：<br><br><strong>a) 安装libjpeg</strong><br><div><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><pre># cd ..<br># rpm -qa | grep libjpeg<br># rpm -qa | grep libjpeg | xargs rpm -e –nodeps –allmatches<br># wget ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/delegates/libjpeg-6b.tar.gz<br># tar -zxvf libjpeg-6b.tar.gz<br># cd libjpeg-6b<br># ./configure<br># make<br># make install<br># ln -s /usr/local/lib/libjpeg<em> /lib/<br># ln -s /usr/local/lib/libjpeg</em> /lib64/</pre><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br></div><br><strong>b) 安装libpng</strong><br><div><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><pre># cd ..<br><br># rpm -qa | grep libpng<br># rpm -qa | grep libpng | xargs rpm -e –nodeps –allmatches<br># wget ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/delegates/libpng-1.2.49.tar.gz<br># tar -zxvf libpng-1.2.49.tar.gz<br># cd libpng-1.2.49<br># ./configure<br># make<br># make install<br># ln -s /usr/local/lib/libpng<em> /lib/<br># ln -s /usr/local/lib/libpng</em> /lib64/</pre><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br></div><br><strong>c) 安装freetype</strong><br><div><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br><pre># cd ..<br># rpm -qa | grep freetype<br># rpm -qa | grep freetype | xargs rpm -e –nodeps –allmatches<br># wget ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/delegates/freetype-2.4.10.tar.gz<br># tar -zxvf freetype-2.4.10.tar.gz<br># cd freetype-2.4.10<br># ./configure<br># make<br># make install<br># ln -s /usr/local/lib/freetype<em> /lib/<br># ln -s /usr/local/lib/freetype</em> /lib64/</pre><br><div><a title="复制代码"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></div><br></div><br><strong>d) 安装GraphicsMagick</strong><br><div><br><pre># cd ../GraphicsMagick-1.3.17<br># ./configure –prefix=/usr/local/graphicsmagick-1.3.17<br># make<br># make install</pre><br></div><br><strong>备注：</strong>有可能会在安装libpng时，出现ZLIB无法找到的情况，则按照类似方法安装ZLIB。<br><br><strong>2) 使用GraphicsMagic</strong><br><br>将GraphicsMagic_HOME/bin目录加入到执行PATH中，然后执行以下命令。<br><br><strong>&gt;&gt; 查看GraphicsMagic帮助</strong><br><div><br><pre># gm -help</pre><br></div><br><strong>&gt;&gt; 将input.jpg制作成640x480的缩略图</strong><br><div><br><pre># gm convert input.jpg -geometry 640x480^ -gravity center -extent 640x480 output.jpg</pre><br></div><br><strong>&gt;&gt; 将input.jpg制作成640x480的图片，多余的部分留白</strong><br><div><br><pre># gm convert input.jpg -geometry 640x480^ -background white -gravity center -extent 640x480 output.jpg</pre><br></div><br><strong>&gt;&gt; 给inputjpg图片追加文字水印</strong><br><div><br><pre># gm convert input.jpg -font Bookman-DemiItalic -fill red -pointsize 33 -draw “text 1600,50 ‘www.abc.com’” output.jpg</pre><br></div><br><strong>&gt;&gt; 添加边框</strong><br><div><br><pre># gm convert input.jpg -frame 15x15+3+3 output.jpg</pre><br></div><br>原文：<a href="http://www.cnblogs.com/javapro/archive/2013/04/28/3048393.html" target="_blank" rel="external">http://www.cnblogs.com/javapro/archive/2013/04/28/3048393.html</a><br><br>&nbsp;<br><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/15/eclipse-e6-8f-92-e4-bb-b6-e4-b8-87-e8-83-bd-e5-ae-89-e8-a3-85-e6-96-b9-e6-b3-95/" itemprop="url">
                  ECLIPSE插件万能安装方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-06-15T23:40:11+08:00" content="2015-06-15">
              2015-06-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/06/15/eclipse-e6-8f-92-e4-bb-b6-e4-b8-87-e8-83-bd-e5-ae-89-e8-a3-85-e6-96-b9-e6-b3-95/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/15/eclipse-e6-8f-92-e4-bb-b6-e4-b8-87-e8-83-bd-e5-ae-89-e8-a3-85-e6-96-b9-e6-b3-95/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/06/15/eclipse-e6-8f-92-e4-bb-b6-e4-b8-87-e8-83-bd-e5-ae-89-e8-a3-85-e6-96-b9-e6-b3-95/" class="leancloud_visitors" data-flag-title="ECLIPSE插件万能安装方法">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ECLIPSE插件万能安装方法</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>ECLIPSE的插件安装方法有好几种，</p>
<ul>
<li>直接拷贝到ECLIPSE安装目录的PLUGINS目录</li>
<li>使用在线安装或者选择一个本地的插件包</li>
<li>使用LINK文件的方法<br>以上几种方法遇到不同环境，不同ECLIPSE版本，都会有所不同。</li>
</ul>
<p>我主要是介绍万能安装方法，也就是执行一段代码，打印一串信息，复制到ECLIPSE的配置文件中的方法，但我介绍的这种方法稍微简便了一些，因为我把那段代码，打包成了一个JAR可执行文件，这样免去了，在ECLIPSE中新建项目，复制代码，修改插件路径的麻烦。现在直接运行可执行文件即可。并且提供JAR和EXE两个版本。</p>
<p>&nbsp;</p>
<h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><p>运行pluginsSetup程序，粘贴你插件的目录，点击生成，显示出配置信息。</p>
<p>把打印出来的配置信息，追加到ECLIPSE的配置文件当中。</p>
<p>X: eclipseconfigurationorg.eclipse.equinox.simpleconfiguratorbundles.info</p>
<p>以下是安装SVN插件的示例图：</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/6-15.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/6-15.png" alt="" title="6-15"></a></p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/6-15-2.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/6-15-2.png" alt="" title="6-15-2"></a></p>
<h1 id="软件地址"><a href="#软件地址" class="headerlink" title="软件地址"></a>软件地址</h1><p><a href="http://download.csdn.net/detail/as3kenn/8801995" target="_blank" rel="external">http://download.csdn.net/detail/as3kenn/8801995</a></p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/14/php-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae-e4-b8-80-e6-9d-a1-e9-be-99/" itemprop="url">
                  PHP开发环境配置一条龙
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-06-14T22:56:30+08:00" content="2015-06-14">
              2015-06-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/PHP/" itemprop="url" rel="index">
                    <span itemprop="name">PHP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/06/14/php-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae-e4-b8-80-e6-9d-a1-e9-be-99/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/14/php-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae-e4-b8-80-e6-9d-a1-e9-be-99/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/06/14/php-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae-e4-b8-80-e6-9d-a1-e9-be-99/" class="leancloud_visitors" data-flag-title="PHP开发环境配置一条龙">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-软件"><a href="#1-软件" class="headerlink" title="1       软件"></a>1       软件</h1><p>烹饪之前先介绍一下原料，免得出现我说了半天，找不到在哪里的情况。</p>
<p>PhpStorm 8.0.3</p>
<p>XAMPP 1.7.4</p>
<p>&nbsp;</p>
<h1 id="2-安装"><a href="#2-安装" class="headerlink" title="2       安装"></a>2       安装</h1><p>一个优化的程序猿，软件都不会安装，就不要出来混了。</p>
<p>&nbsp;</p>
<h1 id="3-配置"><a href="#3-配置" class="headerlink" title="3       配置"></a>3       配置</h1><h2 id="3-1-配置XAMPP"><a href="#3-1-配置XAMPP" class="headerlink" title="3.1     配置XAMPP"></a>3.1     配置XAMPP</h2><p>PHP程序调试需要用到XDEBUG，XAMPP中自带，但默认没有开启远程调试。</p>
<p>打PHPphp.ini，依次修改以下参数：</p>
<p>zend_extension = “E:Sxamppphpextphp_xdebug.dll”</p>
<p>xdebug.dump.SERVER = REMOTE_ADDR,REQUEST_METHOD</p>
<p>xdebug.dump.GET = “*”</p>
<p>xdebug.idekey = “phpstorm”</p>
<p>xdebug.profiler_append = 0</p>
<p>xdebug.profiler_enable = 1</p>
<p>xdebug.profiler_enable_trigger = 0</p>
<p>xdebug.profiler_output_dir = “E:Sxampptmp”</p>
<p>xdebug.profiler_output_name = “xdebug_profile.%R::%u”</p>
<p>xdebug.remote_enable = 1</p>
<p>xdebug.remote_handler = “dbgp”</p>
<p>xdebug.remote_host = “localhost”</p>
<p>xdebug.remote_port = 9000</p>
<p>xdebug.trace_output_dir = “E:Sxampptmp”</p>
<p>红色部门需要注意保持一致。重启APACHE。</p>
<p>进行<a href="http://localhost/xampp/，点击PHPINFO()，如果可以看到XDEBUG内容，说明配置成功。" target="_blank" rel="external">http://localhost/xampp/，点击PHPINFO()，如果可以看到XDEBUG内容，说明配置成功。</a></p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/1.jpg" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/1.jpg" alt="" title="1"></a></p>
<p>&nbsp;</p>
<h2 id="3-2-配置PHPSTORM"><a href="#3-2-配置PHPSTORM" class="headerlink" title="3.2     配置PHPSTORM"></a>3.2     配置PHPSTORM</h2><p>打开 File&gt;Settings&gt;PHP&gt;Servers，添加 Web Application Debug 服务器。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/21.jpg" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/21-1024x280.jpg" alt="" title="2"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>打开 File&gt;Settings&gt;PHP&gt;Debug，查看 Xdebug 配置信息，其中的 Debug port 是否是 9000 (其实就是看看是否和前面服务端 php.ini 里的 xdebug.remote_port 保持一致，或设置其他较大端口如：10000，只要二者相同即可)。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/3.jpg" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/3-1024x628.jpg" alt="" title="3"></a></p>
<p>打开 File&gt;Settings&gt;PHP&gt;Debug&gt;DBGp Proxy 下，IDE key 可以随便填写如：PhpStorm，Host 可以设置为 localhost 或者 127.0.0.1，port 是指 HTTP 端口，默认是 80，当然可以随意修改，把服务器的 HTTP 端口设置成一样就成。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/4.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/4-1024x759.png" alt="" title="4"></a></p>
<p>&nbsp;</p>
<h2 id="3-3-浏览器插件安装"><a href="#3-3-浏览器插件安装" class="headerlink" title="3.3     浏览器插件安装"></a>3.3     浏览器插件安装</h2><p>Chrome浏览器使用官网提供的插件， <a href="https://chrome.google.com/webstore/search/JetBrains?utm_source=chrome-ntp-icon" target="_blank" rel="external">JetBrains IDE Support</a>，</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/5.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/5-1024x197.png" alt="" title="5"></a></p>
<p>FireFox浏览器使用The easiest Xdebug 插件，在选项中设置 IDE key = phpstorm (与前面说明的IDE key保持一致即可)</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/6.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/6.png" alt="" title="6"></a></p>
<h1 id="4-调试"><a href="#4-调试" class="headerlink" title="4       调试"></a>4       调试</h1><p>打开PHPSTORM，新建一个项目PHP_Hello，并且新建一个PHP文件index.php，再输入一行代码。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/7.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/7.png" alt="" title="7"></a></p>
<p>打开Run-&gt;Edit Configurations，添加PHP Web Application。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/8.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/8-1024x581.png" alt="" title="8"></a></p>
<p>打开Tools-&gt; Deployment-&gt; Configuration，添加一个服务。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/9.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/9.png" alt="" title="9"></a></p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/10.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/10.png" alt="" title="10"></a></p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/11.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/11.png" alt="" title="11"></a></p>
<p>设置自动更新</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/12.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/12.png" alt="" title="12"></a></p>
<p>打开监听<a href="http://www.geek5.cn/wp-content/uploads/2015/06/13.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/13.png" alt="" title="13"></a></p>
<p>设置断点，点击绿色爬虫开始调试。</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/14.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/14.png" alt="" title="14"></a></p>
<p>成功了 ：）</p>
<p><a href="http://www.geek5.cn/wp-content/uploads/2015/06/15.png" target="_blank" rel="external"><img src="http://www.geek5.cn/wp-content/uploads/2015/06/15.png" alt="" title="15"></a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tva2.sinaimg.cn/crop.0.0.664.664.180/6c384f54jw8f684neukngj20ig0igt9s.jpg"
               alt="Calc Yu" />
          <p class="site-author-name" itemprop="name">Calc Yu</p>
          <p class="site-description motion-element" itemprop="description">喜欢研究技术  </p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">38</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">40</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/CalcYu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/210005998" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://geek5.cn/" title="极客舞" target="_blank">极客舞</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Calc Yu</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  
  Theme -
  <a class="theme-link"  href="https://github.com/calcyu/hexo-theme-next" >
    NexT.Geek5
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"geek5cn"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="//cdn.jsdelivr.net/ua-parser.js/0.7.10/ua-parser.min.js"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("NC5Qr83IVcp4hw7T9DjeKA6s-gzGzoHsz", "UfhyHQHoyqWeLCUP5fgwEN7F");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
